<div class="main-view">
  <div class="user-view">
    <div class="search-box">
      <i class="fa-solid fa-magnifying-glass"></i>
      <input type="text" placeholder="Tìm kiếm..." autocomplete="off">
    </div>
  </div>
  <div class="banner">
    <div id="HOMEslider" class="keen-slider">
      <div class="keen-slider__slide sliderH">1</div>
      <div class="keen-slider__slide sliderH">2</div>
      <div class="keen-slider__slide sliderH">3</div>
      <div class="keen-slider__slide sliderH">4</div>
      <div class="keen-slider__slide sliderH">5</div>
      <div class="keen-slider__slide sliderH">6</div>
    </div>
  </div>
  <div class="main-content">
    <div class="flex-c main-b">
      <div class="flex main-b-head">
        <div class="flex left">
          <div class="m-h1">Ưu đãi</div>
        </div>
        <div class="flex right"><a href="#">Xem thêm <i class="fa-solid fa-angle-right"></i></a></div>
      </div>
      <div class="flex sb gap5">
        <div class="scroll tsale">
          <div class="main-b-item">
            <div class="photo"><img src="#"></div>
            <div class="item-detail">
              <div class="store">Nhà hàng A</div>
            </div>
          </div>
          <div class="main-b-item">
            <div class="photo"><img src="#"></div>
            <div class="item-detail">
              <div class="store">Nhà hàng A</div>
            </div>
          </div>
          <div class="main-b-item">
            <div class="photo"><img src="#"></div>
            <div class="item-detail">
              <div class="store">Nhà hàng A</div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="flex-c main-b">
      <div class="flex main-b-head">
        <div class="flex left">
          <div class="m-h1">Gần đây</div>
        </div>
        <div class="flex right"><a href="#">Xem thêm <i class="fa-solid fa-angle-right"></i></a></div>
      </div>
      <div class="flex sb gap5">
        <div class="scroll">
          <div class="main-b-item">
            <div class="sales">-25%</div>
            <div class="photo"><img src="#"></div>
            <div class="item-detail">
              <div class="name">Trà sửa A</div>
              <div class="store">Nhà hàng A</div>
              <div class="address">
                <i class="fa-solid fa-location-dot"></i>
                Ngũ Hồ, Thiện Kế
              </div>
            </div>
          </div>
          <div class="main-b-item">
            <div class="sales">-15%</div>
            <div class="photo"><img src="#"></div>
            <div class="item-detail">
              <div class="name">Trà sửa A</div>
              <div class="store">Nhà hàng A</div>
              <div class="address">
                <i class="fa-solid fa-location-dot"></i>
                Ngũ Hồ, Thiện Kế
              </div>
            </div>
          </div>
          <div class="main-b-item">
            <div class="sales">-22%</div>
            <div class="photo"><img src="#"></div>
            <div class="item-detail">
              <div class="name">Trà sửa A</div>
              <div class="store">Nhà hàng A</div>
              <div class="address">
                <i class="fa-solid fa-location-dot"></i>
                Ngũ Hồ, Thiện Kế
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="flex-c main-b">
      <div class="flex main-b-head">
        <div class="flex left">
          <div class="m-h1">Mới nhất</div>
        </div>
        <div class="flex right"><a href="#">Xem thêm <i class="fa-solid fa-angle-right"></i></a></div>
      </div>
      <div class="flex sb gap5">
        <div class="scroll">
          <div class="main-b-item">
            <div class="sales">-25%</div>
            <div class="photo"><img src="#"></div>
            <div class="item-detail">
              <div class="name">Trà sửa A</div>
              <div class="store">Nhà hàng A</div>
              <div class="address">
                <i class="fa-solid fa-location-dot"></i>
                Ngũ Hồ, Thiện Kế
              </div>
            </div>
          </div>
          <div class="main-b-item">
            <div class="sales">-15%</div>
            <div class="photo"><img src="#"></div>
            <div class="item-detail">
              <div class="name">Trà sửa A</div>
              <div class="store">Nhà hàng A</div>
              <div class="address">
                <i class="fa-solid fa-location-dot"></i>
                Ngũ Hồ, Thiện Kế
              </div>
            </div>
          </div>
          <div class="main-b-item">
            <div class="sales">-22%</div>
            <div class="photo"><img src="#"></div>
            <div class="item-detail">
              <div class="name">Trà sửa A</div>
              <div class="store">Nhà hàng A</div>
              <div class="address">
                <i class="fa-solid fa-location-dot"></i>
                Ngũ Hồ, Thiện Kế
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="flex-c main-b">
      <div class="flex main-b-head">
        <div class="flex left">
          <div class="m-h1">Gợi ý hôm nay</div>
        </div>
        <div class="flex right"><a href="#">Xem thêm <i class="fa-solid fa-angle-right"></i></a></div>
      </div>
      <div class="flex sb gap5">
        <div class="list" id="list_stored">
          <div class="main-b-item">
            <div class="sales">-25%</div>
            <div class="photo"><img src="#"></div>
            <div class="item-detail">
              <div class="name">Trà sửa A</div>
              <div class="store">Nhà hàng A</div>
              <div class="cost">30.000</div>
            </div>
          </div>
          <div class="main-b-item">
            <div class="sales">-15%</div>
            <div class="photo"><img src="#"></div>
            <div class="item-detail">
              <div class="name">Trà sửa A</div>
              <div class="store">Nhà hàng A</div>
              <div class="cost">33.000</div>
            </div>
          </div>
          <div class="main-b-item">
            <div class="sales">-22%</div>
            <div class="photo"><img src="#"></div>
            <div class="item-detail">
              <div class="name">Trà sửa Trân châu đường đen có đường siêu siêu ngon</div>
              <div class="store">Nhà hàng A</div>
              <div class="cost">20.000</div>
            </div>
          </div>
          <div class="main-b-item">
            <div class="sales">-22%</div>
            <div class="photo"><img src="#"></div>
            <div class="item-detail">
              <div class="name">Trà sửa Trân châu đường đen có đường siêu siêu ngon</div>
              <div class="store">Nhà hàng A</div>
              <div class="cost">20.000</div>
            </div>
          </div>
          <div class="main-b-item">
            <div class="sales">-22%</div>
            <div class="photo"><img src="#"></div>
            <div class="item-detail">
              <div class="name">Trà sửa Trân châu đường đen có đường siêu siêu ngon</div>
              <div class="store">Nhà hàng A</div>
              <div class="cost">20.000</div>
            </div>
          </div>
          <div class="main-b-item">
            <div class="sales">-22%</div>
            <div class="photo"><img src="#"></div>
            <div class="item-detail">
              <div class="name">Trà sửa Trân châu đường đen có đường siêu siêu ngon</div>
              <div class="store">Nhà hàng A</div>
              <div class="cost">20.000</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="more-tools">
  <div class="tools-item" id="scroll_top"><i class="fa-solid fa-angle-up"></i></div>
  <div class="tools-item" id="chat-box"><i class="fa-regular fa-message"></i></div>
</div>
<script type="text/javascript">
$(document).ready(async()=>{
  var loaded_item=4;
  $("#chat-box").click(async()=>{
    loadTab("chat",true);
  });
  $("#scroll_top").click(async()=>{
    document.getElementsByClassName("main-view")[0].scrollTo({top: 0, behavior: 'smooth'});
  });
  $(".main-view").scroll(function(e) {
    var h=e.currentTarget.scrollHeight;
    var down=h-$(".main-view").scrollTop()-$(window).height();;
    if($(".main-view").scrollTop()>$(window).height()){
      $("#scroll_top").fadeIn(500);
    } else {
      $("#scroll_top").fadeOut(500);
    }
    if(down<0){
      var getItem="";
      if(getItem&&getItem.result==true){
        var view="";
        for(var i=0;i<getItem.data.length;i++){
          loaded_item++;
          view+=`<div class="main-b-item">
            <div class="sales">-22%</div>
            <div class="photo"><img src="#"></div>
            <div class="item-detail">
              <div class="name">Trà sửa Trân châu đường đen có đường siêu siêu ngon</div>
              <div class="store">Nhà hàng A</div>
              <div class="cost">20.000</div>
            </div>
          </div>`;
        }
        $("#list_stored").append(view);
      } else {

      }
      var newload=`<div class="main-b-item">
          <div class="sales">-22%</div>
          <div class="photo"><img src="#"></div>
          <div class="item-detail">
            <div class="name">Trà sửa Trân châu đường đen có đường siêu siêu ngon</div>
            <div class="store">Nhà hàng A</div>
            <div class="cost">20.000</div>
          </div>
        </div>
        <div class="main-b-item">
          <div class="sales">-22%</div>
          <div class="photo"><img src="#"></div>
          <div class="item-detail">
            <div class="name">Trà sửa Trân châu đường đen có đường siêu siêu ngon</div>
            <div class="store">Nhà hàng A</div>
            <div class="cost">20.000</div>
          </div>
        </div><div class="main-b-item">
          <div class="sales">-22%</div>
          <div class="photo"><img src="#"></div>
          <div class="item-detail">
            <div class="name">Trà sửa Trân châu đường đen có đường siêu siêu ngon</div>
            <div class="store">Nhà hàng A</div>
            <div class="cost">20.000</div>
          </div>
        </div>
        <div class="main-b-item">
          <div class="sales">-22%</div>
          <div class="photo"><img src="#"></div>
          <div class="item-detail">
            <div class="name">Trà sửa Trân châu đường đen có đường siêu siêu ngon</div>
            <div class="store">Nhà hàng A</div>
            <div class="cost">20.000</div>
          </div>
        </div>`;
      loaded_item+=4;
      $("#list_stored").append(newload);
    }
  });

  // slider
  var HOMEslider = new KeenSlider(
    "#HOMEslider",{
      loop: true,
    },[
      (slider) => {
        let timeout
        let mouseOver = false
        function clearNextTimeout() {
          clearTimeout(timeout)
        }
        function nextTimeout() {
          clearTimeout(timeout)
          if (mouseOver) return
          timeout = setTimeout(() => {
            slider.next()
          }, 2000)
        }
        slider.on("created", () => {
          slider.container.addEventListener("mouseover", () => {
            mouseOver = true
            clearNextTimeout()
          })
          slider.container.addEventListener("mouseout", () => {
            mouseOver = false
            nextTimeout()
          })
          nextTimeout()
        })
        slider.on("dragStarted", clearNextTimeout)
        slider.on("animationEnded", nextTimeout)
        slider.on("updated", nextTimeout)
      },
    ]
  )
});
</script>